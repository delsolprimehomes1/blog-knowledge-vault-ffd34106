# Cloudflare Worker Configuration for Del Sol Prime Homes SEO
# ============================================================
#
# This worker intercepts requests for Q&A, Blog, Comparison, and Location
# pages and injects correct SEO metadata by calling the Supabase edge function.
#
# DEPLOYMENT INSTRUCTIONS:
# 1. Install Wrangler CLI: npm install -g wrangler
# 2. Login to Cloudflare: wrangler login
# 3. Deploy: wrangler deploy
#
# Or deploy manually via Cloudflare Dashboard:
# 1. Go to: https://dash.cloudflare.com â†’ Workers & Pages
# 2. Create new Worker
# 3. Paste contents of public/cloudflare-worker.js
# 4. Configure routes below

name = "delsolprimehomes-seo-router"
main = "public/cloudflare-worker.js"
compatibility_date = "2024-01-01"

# Environment variables
[vars]
EDGE_FUNCTION_URL = "https://kazggnufaoicopvmwhdl.supabase.co/functions/v1/serve-seo-page"
REACT_APP_ORIGIN = "https://www.delsolprimehomes.com"
WEBFLOW_ORIGIN = "https://delsolprimehomes.webflow.io"
DEBUG = "false"

# Route patterns - these URLs will be handled by the worker
# All Q&A pages in all languages
[[routes]]
pattern = "www.delsolprimehomes.com/*/qa/*"
zone_name = "delsolprimehomes.com"

[[routes]]
pattern = "delsolprimehomes.com/*/qa/*"
zone_name = "delsolprimehomes.com"

# All Blog pages in all languages
[[routes]]
pattern = "www.delsolprimehomes.com/*/blog/*"
zone_name = "delsolprimehomes.com"

[[routes]]
pattern = "delsolprimehomes.com/*/blog/*"
zone_name = "delsolprimehomes.com"

# All Comparison pages in all languages
[[routes]]
pattern = "www.delsolprimehomes.com/*/compare/*"
zone_name = "delsolprimehomes.com"

[[routes]]
pattern = "delsolprimehomes.com/*/compare/*"
zone_name = "delsolprimehomes.com"

# All Location pages in all languages
[[routes]]
pattern = "www.delsolprimehomes.com/*/locations/*"
zone_name = "delsolprimehomes.com"

[[routes]]
pattern = "delsolprimehomes.com/*/locations/*"
zone_name = "delsolprimehomes.com"

# Cache configuration
[cache]
# Cache SEO responses for 1 hour
default_ttl = 3600
