# Cache rules last updated: 2026-02-19T18:00:00Z

# index.html — SPA entry point — MUST NEVER be cached at the edge
# A stale index.html references old JS bundle filenames that no longer exist after deploy
# This is the root cause of apartments/villas "redirecting to homepage" after every push
/index.html
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
# Sitemap XML files - serve with short cache for freshness
/sitemap.xml
  Content-Type: application/xml; charset=utf-8
  X-Content-Type-Options: nosniff
  Cache-Control: public, max-age=300, s-maxage=300, stale-while-revalidate=60
  CDN-Cache-Control: max-age=300

/sitemap-index.xml
  Content-Type: application/xml; charset=utf-8
  X-Content-Type-Options: nosniff
  Cache-Control: public, max-age=300, s-maxage=300, stale-while-revalidate=60
  CDN-Cache-Control: max-age=300

/sitemaps/*
  Content-Type: application/xml; charset=utf-8
  X-Content-Type-Options: nosniff
  Cache-Control: public, max-age=300, s-maxage=300, stale-while-revalidate=60
  CDN-Cache-Control: max-age=300

# AI/SEO related files
/robots.txt
  Content-Type: text/plain; charset=utf-8

/ai.txt
  Content-Type: text/plain; charset=utf-8

/llm.txt
  Content-Type: text/plain; charset=utf-8

# Q&A pages - aggressive CDN caching + crawler headers
/*/qa/*
  Cache-Control: public, max-age=3600, s-maxage=3600, stale-while-revalidate=86400
  CDN-Cache-Control: max-age=3600
  X-Robots-Tag: all
  X-Content-Type-Options: nosniff

# JSON files
/*.json
  Content-Type: application/json; charset=utf-8

# Villas/Apartments SPA routes - prevent CDN caching of stale static HTML
/en/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/nl/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/fr/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/de/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/fi/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/pl/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/da/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/hu/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/sv/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/no/villas/properties
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/en/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/nl/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/fr/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/de/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/fi/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/pl/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/da/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/hu/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/sv/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
/no/apartments
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/en/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/nl/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/fr/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/de/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/fi/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/pl/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/da/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/hu/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/sv/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store

/no/listings
  Cache-Control: no-store, no-cache, must-revalidate, proxy-revalidate
  Surrogate-Control: no-store
  CDN-Cache-Control: no-store
